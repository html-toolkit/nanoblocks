<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Noscript test</title>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <link rel="stylesheet" href="../blocks/s/demo.css">
    <link rel="stylesheet" href="../blocks/s/all.css">
    <link rel="stylesheet" type="text/css" href="../node_modules/grunt-mocha/node_modules/mocha/mocha.css">
    <link rel="stylesheet" type="text/css" href="index.css">

    <script src="http://yandex.st/jquery/1.9.1/jquery.js"></script>

    <script type="text/javascript" src="../node_modules/grunt-mocha/node_modules/mocha/mocha.js"></script>
    <script type="text/javascript" src="../node_modules/expect.js/expect.js"></script>
    <script type="text/javascript" src="../node_modules/sinon/pkg/sinon.js"></script>

    <script type="text/javascript" src="../nanoblocks.js"></script>
</head>
<body>
    <!-- Test body -->
    <div data-nb="block-parent">
        <div class="inner" data-nb="block1 block2"></div>
    </div>

    <!-- mocha output -->
    <div id="mocha"></div>

    <script type="text/javascript">
        window.onload = function() {
            mocha.setup('bdd');

            describe('2 blocks on one node: both events trigger', function() {
                var result = [];

                nb.define('block1', {
                    events: {
                        click: function onClickBlock1() {
                            result.push(this.name);
                            return false;
                        }
                    }
                });

                nb.define('block2', {
                    events: {
                        click: function onClickBlock2() {
                            result.push(this.name);
                        }
                    }
                });

                nb.define('block-parent', {
                    events: {
                        click: function() {
                            result.push(this.name);
                        }
                    }
                });

                // Run test.
                $('.inner').trigger('click');

                // Check test result.

                it('click: block1, block2', function() {
                    expect(result).to.be.eql( [ 'block1', 'block2' ] );
                });
            });

            mocha.run();
        };
    </script>
</body>
</html>
